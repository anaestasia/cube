[{"C:\\wamp64\\www\\cube\\client\\src\\index.js":"1","C:\\wamp64\\www\\cube\\client\\src\\reportWebVitals.js":"2","C:\\wamp64\\www\\cube\\client\\src\\App.js":"3","C:\\wamp64\\www\\cube\\client\\src\\components\\home\\Home.js":"4","C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Favorites\\Favorites.js":"5","C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\MyRessources\\MyRessources.js":"6","C:\\wamp64\\www\\cube\\client\\src\\components\\profile\\Profile.js":"7","C:\\wamp64\\www\\cube\\client\\src\\components\\404\\404.js":"8","C:\\wamp64\\www\\cube\\client\\src\\components\\Catalog\\Catalog.js":"9","C:\\wamp64\\www\\cube\\client\\src\\components\\token\\token.js":"10","C:\\wamp64\\www\\cube\\client\\src\\components\\admin\\Admin.js":"11","C:\\wamp64\\www\\cube\\client\\src\\components\\admin\\approvedRessources\\ApprovedRessources.js":"12","C:\\wamp64\\www\\cube\\client\\src\\components\\403\\403.js":"13","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RessourceForm\\RessourceForm.js":"14","C:\\wamp64\\www\\cube\\client\\src\\components\\footer\\Footer.js":"15","C:\\wamp64\\www\\cube\\client\\src\\components\\menu\\MenuNav\\Menu.js":"16","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\RegisterForm.js":"17","C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\RessourceNotConnected\\RessourceNotConnected.js":"18","C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Ressource.js":"19","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputPassword.js":"20","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputFirstname.js":"21","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputStreetNb.js":"22","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputCity.js":"23","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputLastname.js":"24","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputStreetName.js":"25","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputEmail.js":"26","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputCountry.js":"27","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputPostalCode.js":"28","C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\VignetteRessource\\vignetteRessource.js":"29","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\LoginForm\\LoginForm.js":"30","C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\typeressources.js":"31","C:\\wamp64\\www\\cube\\client\\src\\components\\Catalog\\CatalogSearch\\CatalogSearch.js":"32","C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\typerelationship.js":"33","C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\categories.js":"34","C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\roles.js":"35","C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\reason.js":"36","C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\punishement.js":"37","C:\\wamp64\\www\\cube\\client\\src\\components\\menu\\MenuNav\\SubMenuNav\\MenuBackOffice.js":"38","C:\\wamp64\\www\\cube\\client\\src\\components\\menu\\MenuNav\\SubMenuNav\\MenuUser.js":"39","C:\\wamp64\\www\\cube\\client\\src\\components\\menu\\MenuNav\\SubMenuNav\\MenuRessources.js":"40","C:\\wamp64\\www\\cube\\client\\src\\components\\buttons\\SubmitBtn\\SubmitBtn.js":"41","C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Comment\\Comment.js":"42","C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Writecomment\\writeComment.js":"43","C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\table.js":"44","C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Comment\\Posts.js":"45","C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Pagination\\Pagination.js":"46"},{"size":674,"mtime":1613833078847,"results":"47","hashOfConfig":"48"},{"size":362,"mtime":1613832660492,"results":"49","hashOfConfig":"48"},{"size":8470,"mtime":1616089675881,"results":"50","hashOfConfig":"48"},{"size":1800,"mtime":1616087886927,"results":"51","hashOfConfig":"48"},{"size":299,"mtime":1615908949695,"results":"52","hashOfConfig":"48"},{"size":272,"mtime":1615651106739,"results":"53","hashOfConfig":"48"},{"size":2389,"mtime":1615494799894,"results":"54","hashOfConfig":"48"},{"size":641,"mtime":1613835616632,"results":"55","hashOfConfig":"48"},{"size":1302,"mtime":1615908949689,"results":"56","hashOfConfig":"48"},{"size":943,"mtime":1613835112058,"results":"57","hashOfConfig":"48"},{"size":1020,"mtime":1613838434867,"results":"58","hashOfConfig":"48"},{"size":4060,"mtime":1615908949691,"results":"59","hashOfConfig":"48"},{"size":610,"mtime":1613835616625,"results":"60","hashOfConfig":"48"},{"size":7152,"mtime":1615908949692,"results":"61","hashOfConfig":"48"},{"size":1269,"mtime":1613838481524,"results":"62","hashOfConfig":"48"},{"size":2368,"mtime":1616090667971,"results":"63","hashOfConfig":"48"},{"size":6373,"mtime":1613840986093,"results":"64","hashOfConfig":"48"},{"size":676,"mtime":1613839173411,"results":"65","hashOfConfig":"48"},{"size":12401,"mtime":1616074051503,"results":"66","hashOfConfig":"48"},{"size":5939,"mtime":1613836009109,"results":"67","hashOfConfig":"48"},{"size":2246,"mtime":1613835971766,"results":"68","hashOfConfig":"48"},{"size":2290,"mtime":1613836184665,"results":"69","hashOfConfig":"48"},{"size":2192,"mtime":1613835920725,"results":"70","hashOfConfig":"48"},{"size":2190,"mtime":1613835977822,"results":"71","hashOfConfig":"48"},{"size":2291,"mtime":1613836042926,"results":"72","hashOfConfig":"48"},{"size":3771,"mtime":1613835983118,"results":"73","hashOfConfig":"48"},{"size":2246,"mtime":1613835939894,"results":"74","hashOfConfig":"48"},{"size":2324,"mtime":1613836035894,"results":"75","hashOfConfig":"48"},{"size":1394,"mtime":1615908949697,"results":"76","hashOfConfig":"48"},{"size":1190,"mtime":1615908949691,"results":"77","hashOfConfig":"48"},{"size":4272,"mtime":1613834836422,"results":"78","hashOfConfig":"48"},{"size":6562,"mtime":1616139822364,"results":"79","hashOfConfig":"48"},{"size":4290,"mtime":1613834836420,"results":"80","hashOfConfig":"48"},{"size":4224,"mtime":1613834836403,"results":"81","hashOfConfig":"48"},{"size":4086,"mtime":1613834836408,"results":"82","hashOfConfig":"48"},{"size":4229,"mtime":1613834836406,"results":"83","hashOfConfig":"48"},{"size":4277,"mtime":1613834836405,"results":"84","hashOfConfig":"48"},{"size":2281,"mtime":1613834354164,"results":"85","hashOfConfig":"48"},{"size":3233,"mtime":1616089690078,"results":"86","hashOfConfig":"48"},{"size":1191,"mtime":1613834324230,"results":"87","hashOfConfig":"48"},{"size":393,"mtime":1613833570366,"results":"88","hashOfConfig":"48"},{"size":1755,"mtime":1616139822364,"results":"89","hashOfConfig":"48"},{"size":2444,"mtime":1616074051504,"results":"90","hashOfConfig":"48"},{"size":279,"mtime":1613834836419,"results":"91","hashOfConfig":"48"},{"size":3354,"mtime":1616074051503,"results":"92","hashOfConfig":"48"},{"size":2630,"mtime":1616139837288,"results":"93","hashOfConfig":"48"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},"4ge3hu",{"filePath":"97","messages":"98","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"99","messages":"100","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"101","usedDeprecatedRules":"96"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"104","messages":"105","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"106","messages":"107","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"108","messages":"109","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"112","messages":"113","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"114","messages":"115","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"118","messages":"119","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"120","messages":"121","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"122","messages":"123","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"128","messages":"129","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"130","messages":"131","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"132","messages":"133","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"134","usedDeprecatedRules":"96"},{"filePath":"135","messages":"136","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"137","messages":"138","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"139","messages":"140","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"141","messages":"142","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"147","messages":"148","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"149","messages":"150","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"151","messages":"152","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"153","messages":"154","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"155","messages":"156","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"157","messages":"158","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"159","messages":"160","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"161","messages":"162","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"163","messages":"164","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"165","messages":"166","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"167","messages":"168","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"169","messages":"170","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"171","messages":"172","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"173","messages":"174","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"175","messages":"176","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"177","messages":"178","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"179","messages":"180","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"181","messages":"182","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"183","messages":"184","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"185","messages":"186","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"96"},{"filePath":"187","messages":"188","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"C:\\wamp64\\www\\cube\\client\\src\\index.js",[],["189","190"],"C:\\wamp64\\www\\cube\\client\\src\\reportWebVitals.js",[],"C:\\wamp64\\www\\cube\\client\\src\\App.js",["191","192"],"import React, { useEffect, useState } from \"react\";\r\nimport { BrowserRouter as Router, Route, Switch } from \"react-router-dom\";\r\nimport Axios from \"axios\";\r\n\r\nimport Home from \"./components/home/Home\";\r\nimport Menu from \"./components/menu/MenuNav/Menu\";\r\nimport Footer from \"./components/footer/Footer\";\r\nimport RegisterForm from \"./components/form/RegisterForm/RegisterForm\";\r\nimport Catalog from \"./components/Catalog/Catalog\";\r\nimport Ressource from \"./components/ressource/Ressource\";\r\nimport Favorites from \"./components/ressource/Favorites/Favorites\";\r\nimport MyRessources from \"./components/ressource/MyRessources/MyRessources\";\r\nimport SubmitRessource from \"./components/form/RessourceForm/RessourceForm\";\r\nimport Profile from \"./components/profile/Profile\";\r\nimport RessourceNotConnected from \"./components/ressource/RessourceNotConnected/RessourceNotConnected\";\r\nimport Admin from \"./components/admin/Admin\";\r\nimport AdminApprovedRessources from \"./components/admin/approvedRessources/ApprovedRessources\";\r\nimport NoAccess from \"./components/403/403\";\r\nimport NotFound from \"./components/404/404\";\r\nimport Token from \"./components/token/token\";\r\n\r\nimport Container from \"react-bootstrap/Container\";\r\nimport Row from \"react-bootstrap/Row\";\r\nimport Col from \"react-bootstrap/Col\";\r\n\r\nimport \"./App.css\";\r\n\r\nrequire(\"dotenv\").config();\r\n\r\nfunction App() {\r\n  const [openMenu, setOpenMenu] = useState(true);\r\n  const [role, setRole] = useState(\"\");// eslint-disable-next-line\r\n  const [status, setStatus] = useState(\"2\");\r\n  const [lastRessources, setLastRessources] = useState([]);\r\n  const [connected, setConnected] = useState(false);\r\n  const [loginForm, setLoginForm] = useState({ email: '', password:'' });\r\n  const [activeSubMenu, setActiveSubMenu] = useState('catalog');\r\n  const [activeSubSubMenu, setActiveSubSubMenu] = useState('ressource');\r\n  \r\n\r\n  const toggleMenu = () => {\r\n    console.log(\"fonction toggleMenu\");\r\n    if (openMenu === true) {\r\n      setOpenMenu(false);\r\n    } else {\r\n      setOpenMenu(true);\r\n    }\r\n  };\r\n\r\n  Axios.defaults.withCredentials = true;\r\n\r\n  const handleLogin = (event) => {\r\n    event.preventDefault();\r\n    var hash = require(\"object-hash\");\r\n    const password = hash.sha1(loginForm.password);\r\n\r\n    if (loginForm.email.trim() !== \"\") {\r\n\r\n      Axios.post(process.env.REACT_APP_SITE_URL_API + \"/users/login\", {\r\n        mail: loginForm.email,\r\n        password: password,\r\n\r\n      }).then((response) => {\r\n        console.log(response.data)\r\n        if (response.data.connecte) {\r\n          console.log(response);\r\n          console.log('response');\r\n          const date = new Date();\r\n          const sqlDate =\r\n            date.getFullYear() +\r\n            \"-\" +\r\n            (date.getMonth() + 1) +\r\n            \"-\" +\r\n            date.getDate() +\r\n            \" \" +\r\n            date.getHours() +\r\n            \":\" +\r\n            date.getMinutes() +\r\n            \":\" +\r\n            date.getSeconds();\r\n\r\n          Axios.post(process.env.REACT_APP_SITE_URL_API + \"/users/edit\", {\r\n            id: response.data.result[0].id,\r\n            valeur: sqlDate,\r\n            champ: \"last_connexion\",\r\n          })\r\n            .then((res) => {\r\n              setConnected(true);\r\n            })\r\n        } else {\r\n          setConnected(false);\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleOnChange = (event) => {\r\n    setLoginForm( { ...loginForm, [ event.target.name ] : event.target.value } )\r\n  };\r\n\r\n  useEffect(() => {\r\n    Axios.get(process.env.REACT_APP_SITE_URL_API + \"/users/login\").then(\r\n      (response) => {\r\n        if (response.data.loggedIn === true) {\r\n          setRole(response.data.user[0].fk_role);\r\n          setConnected(true);\r\n        } else {\r\n          setRole(0);\r\n          setConnected(false);\r\n        }\r\n      }\r\n    );\r\n\r\n    Axios.get(\r\n      process.env.REACT_APP_SITE_URL_API + \"/ressources/lastressource/\" + status\r\n    ).then((response) => {\r\n      if (response.data.existe !== false) {\r\n        setLastRessources(response.data);\r\n      }\r\n      console.log(response);\r\n    });\r\n  }, [status]);\r\n\r\n  Axios.defaults.withCredentials = true;\r\n\r\n  // Droit pour les non connecté (role = \"\")\r\n  let login = true;\r\n  let register = true;\r\n  let home = true;\r\n  let catalog = true;\r\n  let ressource = true;\r\n  let myRessources = false;\r\n  let myFavorites = true;\r\n  let ressourceNotConnected = true;\r\n  let admin = false;\r\n  let submitRessource = false;\r\n  let adminApprovedRessources = false;\r\n  let profile = false;\r\n\r\n  if (role >= 1) {\r\n    // Mail non verifé\r\n    // eslint-disable-next-line\r\n    login = false;\r\n    register = false;\r\n    profile = true;\r\n  }\r\n  if (role >= 2) {\r\n    // Citoyen\r\n    myRessources = true;\r\n    ressourceNotConnected = false;\r\n    submitRessource = true;\r\n  }\r\n  if (role >= 3) {\r\n    // Modérateur\r\n    admin = true;\r\n    adminApprovedRessources = true;\r\n  }\r\n  if (role >= 4) {\r\n    // Admin\r\n  }\r\n  if (role >= 5) {\r\n    // Super-Admin\r\n  }\r\n  return (\r\n    <Router>\r\n      <Switch>\r\n        <Route\r\n          exact\r\n          path=\"/\"\r\n          render={(props) =>\r\n            home ? (\r\n              <Home onSubmit={handleLogin} formValue={ loginForm } onChange={ handleOnChange } connected = { connected }/>\r\n            ) : (\r\n              <NotFound />\r\n            )\r\n          }\r\n          onChange={handleOnChange}\r\n        />\r\n\r\n        <Container fluid>\r\n          <Row className=\"parent-row\">\r\n            <Col xl={3} className=\"col-menu menuFixe\">\r\n              <Menu\r\n                activeSubMenu={activeSubMenu}\r\n                activeSubSubMenu={activeSubSubMenu}\r\n                handleToggleMenu={toggleMenu}\r\n                openMenu={openMenu}\r\n                apiRole={role}\r\n              />\r\n            </Col>\r\n\r\n            <Col xl={9} className=\"col-content-page\">\r\n              <Route\r\n                exact\r\n                path=\"/catalog\"\r\n                render={(props) =>\r\n                  catalog ? (\r\n                    <Catalog ressources={lastRessources} />\r\n                  ) : (\r\n                    <NoAccess />\r\n                  )\r\n                }\r\n              />\r\n\r\n              {/* RESSOURCES */}\r\n\r\n              <Route\r\n                exact\r\n                path=\"/submit-ressource\"\r\n                render={ (props) =>  (submitRessource ? <SubmitRessource /> : <NotFound /> ) }\r\n              />\r\n              <Route\r\n                exact\r\n                path=\"/ressource/:id\"\r\n                render={(props) => (ressource ? <Ressource /> : <NotFound />)}\r\n              />\r\n              <Route\r\n                exact\r\n                path=\"/ressource-not-connected\"\r\n                render={(props) =>\r\n                  ressourceNotConnected ? (\r\n                    <RessourceNotConnected />\r\n                  ) : (\r\n                    <NotFound />\r\n                  )\r\n                }\r\n              />\r\n\r\n              {/* USER */}\r\n              <Route\r\n                exact\r\n                path=\"/profile\"\r\n                render={(props) => (profile ? <Profile /> : <NoAccess />)}\r\n              />\r\n              <Route\r\n                exact\r\n                path=\"/my-ressources\"\r\n                render={(props) =>\r\n                  myRessources ? <MyRessources /> : <NoAccess />\r\n                }\r\n              />\r\n              <Route\r\n                exact\r\n                path=\"/my-favorites\"\r\n                render={(props) => (myFavorites ? <Favorites /> : <NoAccess />)}\r\n              />\r\n\r\n              <Route\r\n                exact\r\n                path=\"/register\"\r\n                render={(props) => (register ? <RegisterForm /> : <NoAccess />)}\r\n              />\r\n              <Route exact path=\"/token/:token\" render={(props) => <Token />} />\r\n\r\n              {/* BO */}\r\n              <Route\r\n                exact\r\n                path=\"/admin\"\r\n                render={(props) => (admin ? <Admin /> : <NotFound />)}\r\n              />\r\n              <Route\r\n                exact\r\n                path=\"/admin/approvedRessources\"\r\n                render={(props) =>\r\n                  adminApprovedRessources ? (\r\n                    <AdminApprovedRessources />\r\n                  ) : (\r\n                    <NotFound />\r\n                  )\r\n                }\r\n              />\r\n\r\n            </Col>\r\n          </Row>\r\n          <Footer />\r\n        </Container>\r\n      </Switch>\r\n    </Router>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","C:\\wamp64\\www\\cube\\client\\src\\components\\home\\Home.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Favorites\\Favorites.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\MyRessources\\MyRessources.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\profile\\Profile.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\404\\404.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\Catalog\\Catalog.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\token\\token.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\admin\\Admin.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\admin\\approvedRessources\\ApprovedRessources.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\403\\403.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RessourceForm\\RessourceForm.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\footer\\Footer.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\menu\\MenuNav\\Menu.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\RegisterForm.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\RessourceNotConnected\\RessourceNotConnected.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Ressource.js",["193"],"import React, { useState , useEffect } from \"react\";\r\nimport { useParams } from 'react-router-dom';\r\nimport Axios from \"axios\";\r\nimport Button from 'react-bootstrap/Button'\r\n\r\n// import ClassicEditor from '@ckeditor/ckeditor5-build-classic';\r\n// import { CKEditor } from '@ckeditor/ckeditor5-react';\r\n// import '@ckeditor/ckeditor5-build-classic/build/translations/fr.js';\r\nimport { CKEditor } from 'cube-project-ril/ckeditor5-react';\r\nimport ClassicEditor from 'cube-project-ril/ckeditor5-mon-build'\r\n\r\nimport Modal from 'react-bootstrap/Modal'\r\nimport Col from 'react-bootstrap/Col';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Comments from './Comment/Comment'\r\nimport WriteComment from './Writecomment/writeComment'\r\n\r\nimport './Ressource.css';\r\n\r\n    export default function Ressource(){\r\n        \r\n        const { id } = useParams();\r\n\r\n        const [show, setShow] = useState(false);\r\n\r\n        const [contenuCommentsCkeditor, setContenuCommentsCkeditor] = useState(\"\");\r\n\r\n        const [idUserConnecte, setIdUserConnecte] = useState(\"\");\r\n        const [idUserAuteur, setIdUserAuteur] = useState(\"\");\r\n        const [role, setRole] = useState(\"\");\r\n\r\n        const [categorie, setCategorie] = useState(\"\");\r\n        const [typeRelation, setTypeRelation] = useState(\"\");\r\n        const [typeRessource, setTypeRessource] = useState(\"\");\r\n        const [message, setMessage] = useState(\"\");\r\n        const [title, setTitle] = useState(\"\");\r\n        const [nbLike, setNbLike] = useState(\"\");\r\n        const [auteur, setAuteur] = useState(\"\");\r\n        const [date_creation, setDate_creation] = useState(\"\");\r\n        const [date_edition, setDate_edition] = useState(\"\");\r\n        const [nombreVue, setNombreVue] = useState(\"\");\r\n        const [vueIncremente, setVueIncremente] = useState(false);\r\n        \r\n        const [ecrireCommentaire, setEcrireCommentaire] = useState(false);\r\n\r\n        Axios.defaults.withCredentials = true;\r\n\r\n        useEffect(() => \r\n        {\r\n            const verifRole = (role) => {\r\n                if (isNaN(id)) \r\n                {\r\n                    window.location.href = \"/404\";\r\n                }\r\n                else\r\n                {\r\n                    Axios.post(process.env.REACT_APP_SITE_URL_API+\"/ressources/getid\", {\r\n                        id: id,\r\n                      }).then((response) => {\r\n                          console.log(response)\r\n                        if (response.data.existe) {\r\n                            if(response.data.result[0].namestatus === 'privée')\r\n                            {\r\n                                if(role >= 2)\r\n                                {\r\n                                    setCategorie(response.data.lesCategories);\r\n                                    setTypeRelation(response.data.result[0].namerelationship);\r\n                                    setTypeRessource(response.data.result[0].nametyperss); //a modifier\r\n                                    setMessage(response.data.result[0].content);  \r\n                                    setContenuCommentsCkeditor(response.data.result[0].content); \r\n                                    setTitle(response.data.result[0].title);\r\n                                    setDate_creation(response.data.result[0].date_creation);\r\n                                    setDate_edition(response.data.result[0].date_edition);\r\n                                    setAuteur(response.data.user[0].lastname + \" \"+ response.data.user[0].firstname);\r\n                                    setIdUserAuteur(response.data.user[0].fk_user);\r\n                                    setNombreVue(response.data.result[0].nb_consultation);\r\n                                    //ajout nombre de vue :\r\n                                    if(!vueIncremente)\r\n                                    {\r\n                                        Axios.post(process.env.REACT_APP_SITE_URL_API+\"/ressources/addVue\", {\r\n                                            id: id,\r\n                                            nb_consultation: nombreVue+1,\r\n                                            });\r\n                                            setVueIncremente(true)\r\n                                    }\r\n                                    //fin ajout nombre de vue \r\n                                }\r\n                                else\r\n                                {\r\n                                   window.location.href = \"/ressourcenonConnecte\";\r\n                                }\r\n                                //renvoyer sur une page veuillez vous connecté pour voir cette article \r\n                                //si la personne n'est pas connecté  \r\n                            }\r\n                            else //public \r\n                            {\r\n                                setCategorie(response.data.lesCategories);\r\n                                setTypeRelation(response.data.result[0].namerelationship);\r\n                                setTypeRessource(response.data.result[0].nametyperss); //a modifier\r\n                                setMessage(response.data.result[0].content);  \r\n                                setContenuCommentsCkeditor(response.data.result[0].content); \r\n                                setTitle(response.data.result[0].title);\r\n                                setDate_creation(response.data.result[0].date_creation);\r\n                                setDate_edition(response.data.result[0].date_edition);\r\n                                setAuteur(response.data.user[0].lastname + \" \"+ response.data.user[0].firstname);\r\n                                setIdUserAuteur(response.data.user[0].fk_user);\r\n                                setNombreVue(response.data.result[0].nb_consultation);\r\n                                //ajout nombre de vue :\r\n                                if(!vueIncremente)\r\n                                {\r\n                                    Axios.post(process.env.REACT_APP_SITE_URL_API+\"/ressources/addVue\", {\r\n                                        id: id,\r\n                                        nb_consultation: nombreVue+1,\r\n                                        });\r\n                                        setVueIncremente(true)\r\n                                }\r\n                                //fin ajout nombre de vue \r\n                            }\r\n                        }\r\n                        else\r\n                        {\r\n                            window.location.href = \"/main\";\r\n                        }\r\n                      });\r\n                }\r\n            }\r\n            \r\n            Axios.get(process.env.REACT_APP_SITE_URL_API+\"/users/login\").then((response) => {\r\n                if (response.data.loggedIn === true) {\r\n                  verifRole(response.data.user[0].fk_role);\r\n                  setIdUserConnecte(response.data.user[0].id);\r\n                  setEcrireCommentaire(true);\r\n                  setRole(response.data.user[0].fk_role);\r\n                }\r\n                else\r\n                {\r\n                    verifRole(0);\r\n                }\r\n              });\r\n\r\n              getNbLike();\r\n\r\n        }, [id,nombreVue,vueIncremente]);\r\n        \r\n\r\n        const handleClose = () => setShow(false);\r\n\r\n        const handleShow = (id) => {\r\n            setShow(true)\r\n          }\r\n\r\n        const handleCkeditorState = (event,editor) => {\r\n            const data = editor.getData();\r\n            setContenuCommentsCkeditor(data);\r\n          }\r\n          \r\n        const editRessource = () => \r\n        {\r\n        //   content = req.body.content;\r\n        // const id\r\n            const date = new Date();\r\n            const sqlDate = date.getFullYear()+\"-\"+(date.getMonth()+1)+\"-\"+date.getDate()+\" \"+(date.getHours())+\":\"+date.getMinutes()+\":\"+date.getSeconds();\r\n\r\n            Axios.post(process.env.REACT_APP_SITE_URL_API+\"/ressources/editRessource\", {\r\n            id: id,\r\n            content: contenuCommentsCkeditor,\r\n            date_edition:sqlDate\r\n            }).then((response) => {\r\n                if(response.data.verif)\r\n                {\r\n                    setShow(false)\r\n                    setMessage(contenuCommentsCkeditor);\r\n                }\r\n        });\r\n        }\r\n\r\n        const likeRessource = () =>\r\n        {\r\n            if(idUserConnecte !== '')\r\n            {\r\n                Axios.post(process.env.REACT_APP_SITE_URL_API+\"/ressourcesLike/create\",{\r\n                user: idUserConnecte,\r\n                ressource: id\r\n                }).then((response) => \r\n                {\r\n                    getNbLike();\r\n                });\r\n            }\r\n            else\r\n            {\r\n                alert('Veuillez vous connecter :-)');\r\n            }\r\n        }\r\n\r\n        const getNbLike = () =>\r\n        {\r\n            Axios.post(process.env.REACT_APP_SITE_URL_API+\"/ressourcesLike/get/nbLike\", \r\n            {\r\n                ressource: 49,\r\n            }).then((response) => \r\n            {\r\n                setNbLike(response.data[0].nbLike)\r\n            });\r\n        }\r\n\r\n\r\n        return (\r\n            <>\r\n            <Modal size=\"lg\" show={show} onHide={handleClose}>\r\n                <Modal.Header closeButton>\r\n                <Modal.Title>Modifier la ressource </Modal.Title>\r\n                </Modal.Header>\r\n                <Modal.Body>\r\n                <CKEditor\r\n                    editor={ ClassicEditor }\r\n                    onReady={ editor => {\r\n                        // You can store the \"editor\" and use when it is needed.\r\n                        console.log( 'Editor is ready to use!', editor );\r\n                    } }\r\n                    onChange={ ( event, editor ) => {\r\n                        const data = editor.getData();\r\n                        console.log( { event, editor, data } );\r\n                    } }\r\n                    onBlur={ ( event, editor ) => {\r\n                        console.log( 'Blur.', editor );\r\n                    } }\r\n                    onFocus={ ( event, editor ) => {\r\n                        console.log( 'Focus.', editor );\r\n                    } }\r\n                />\r\n                </Modal.Body>\r\n                <Modal.Footer>\r\n                <Button variant=\"danger\" onClick={handleClose}>\r\n                    fermer\r\n                </Button>\r\n                <Button variant=\"warning\" onClick={editRessource}>\r\n                    Modifier\r\n                </Button>\r\n                </Modal.Footer>\r\n            </Modal>\r\n\r\n            <div className=\"ressource-container\">\r\n                <div>\r\n                    <h2>{title} <i className=\"fas fa-external-link-alt\"></i></h2>\r\n                    <span><i className=\"fas fa-thumbs-up\" onClick={likeRessource}></i> {nbLike}</span>\r\n                    <span><i className=\"fas fa-ellipsis-v\"></i><i className=\"far fa-heart\"></i><i className=\"fas fa-reply\"></i></span>\r\n                </div>\r\n                <ul>\r\n                    <li className=\"ressource-categorie\"> <i className=\"fas fa-folder-open\"> </i> Catégorie : {categorie}</li>\r\n                    <li className=\"ressource-type-relation\"> <i className=\"fas fa-users\"></i> Type(s) de relation : {typeRelation} </li>\r\n                    <li className=\"ressource-type-ressource\"> <i className=\"fas fa-file-alt\"></i> Type(s) de ressource : {typeRessource} </li>\r\n                </ul>\r\n                <div className=\"content\" dangerouslySetInnerHTML={{__html: message}}></div>\r\n                <hr />\r\n                    <div>Auteur : {auteur}</div>\r\n                    <div>Date création : {date_creation.substring(8,10)}/{date_creation.substring(5,7)}/{date_creation.substring(0,4)} à {date_creation.substring(11,19)}</div>\r\n                    {date_creation !== date_edition && <>Dernière modification : {date_edition.substring(8,10)}/{date_edition.substring(5,7)}/{date_edition.substring(0,4)} à {date_edition.substring(11,19)} <br /></> }\r\n                    {(idUserConnecte === idUserAuteur || role >=4) && <Button variant=\"primary\" onClick={() => {handleShow(id); }}> Edit </Button> }\r\n                    Nombre de vue : {nombreVue}\r\n            </div>\r\n            <Row className=\"row-comment\"><Comments /></Row>\r\n            <Row className=\"row-write-comment\"> {ecrireCommentaire ? <WriteComment /> : <Col />}</Row>\r\n            </>\r\n        );\r\n    }\r\n\r\n","C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputPassword.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputFirstname.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputStreetNb.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputCity.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputLastname.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputStreetName.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputEmail.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputCountry.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\RegisterForm\\InputPostalCode.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\VignetteRessource\\vignetteRessource.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\form\\LoginForm\\LoginForm.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\typeressources.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\Catalog\\CatalogSearch\\CatalogSearch.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\typerelationship.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\categories.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\roles.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\reason.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\punishement.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\menu\\MenuNav\\SubMenuNav\\MenuBackOffice.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\menu\\MenuNav\\SubMenuNav\\MenuUser.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\menu\\MenuNav\\SubMenuNav\\MenuRessources.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\buttons\\SubmitBtn\\SubmitBtn.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Comment\\Comment.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Writecomment\\writeComment.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\tables\\table.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Comment\\Posts.js",[],"C:\\wamp64\\www\\cube\\client\\src\\components\\ressource\\Pagination\\Pagination.js",[],{"ruleId":"194","replacedBy":"195"},{"ruleId":"196","replacedBy":"197"},{"ruleId":"198","severity":1,"message":"199","line":37,"column":25,"nodeType":"200","messageId":"201","endLine":37,"endColumn":41},{"ruleId":"198","severity":1,"message":"202","line":38,"column":28,"nodeType":"200","messageId":"201","endLine":38,"endColumn":47},{"ruleId":"198","severity":1,"message":"203","line":152,"column":15,"nodeType":"200","messageId":"201","endLine":152,"endColumn":34},"no-native-reassign",["204"],"no-negated-in-lhs",["205"],"no-unused-vars","'setActiveSubMenu' is assigned a value but never used.","Identifier","unusedVar","'setActiveSubSubMenu' is assigned a value but never used.","'handleCkeditorState' is assigned a value but never used.","no-global-assign","no-unsafe-negation"]